(self.webpackChunkdropsride=self.webpackChunkdropsride||[]).push([[242],{9793:(e,t,a)=>{"use strict";var o=a(5594),i=a.n(o),n=(a(8785),a(1768),a(3557),a(9669)),s=a.n(n);s().defaults.withCredentials=!0,s().defaults.xsrfCookieName="csrftoken",s().defaults.xsrfHeaderName="X-CSRFToken",s().defaults.timeout=25e3;const r=s();var l=a(1077),d=a.n(l);function c(e){return new window.Promise((t=>setTimeout(t,e)))}var g=a(5450),p=a.n(g);function u(e){return new window.Promise((t=>setTimeout(t,e)))}var m=a(2029);function h(e){return new window.Promise((t=>setTimeout(t,e)))}let w="",f="";function y(){return{openCreateUser:!1,openCreateLocal:!1,openCreateCareer:!1,openCreateCar:!1,openUpdateCreateCar:!1,openCreateNews:!1,loading:!1,applying:!1,readDetail:!1,swiper:null,addDep:!1,updating:!1,searchWord:"",notif:!1,pushLoading:!1,userState:window.state,tmDetails:!1,proDetails:!1,tDetails:!1,buyTicket:!1,isVerified:!1,amount:window.amount,showTicketModal:!1,subscribed:0,fullscreen:!1,addEmail:!1,driverText:"",edit:!1,editKin:!1,profile_img:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",post_img:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",editCard:!1,switch_to_driver:null,reveal:!1,pstep:1,uMenu:!1,notifications:!1,hasUnreadNotifications:!1,apps:!1,lang:!1,search:!1,menu:!1,showNav:!1,navTop:!1,lastScroll:0,formData:{switch_to_driver:""},openUserDetail(e){this.proDetails=!0;let t=`/users/get-detail/${e}/`;p().ajax("GET",t,{target:"#uDetail",swap:"innerHTML"})},async updateCarType(){this.creating=!0;const e=this.$refs.carUpdateForm,t=e.action,a=e.dataset.token;let o=new FormData(e);e.querySelectorAll("[name]").forEach((e=>{if("textarea"===e.type){let t=e.id;console.log("textarea content: ",window.parent.tinymce.get(t).getContent()),o.append(e.name,window.parent.tinymce.get(t).getContent())}"textarea"!==e.type&&o.append(e.name,e.value)})),await h(3e3),await r.put(`${t}`,o,{headers:{Authorization:`Token ${a}`}}).then((async e=>{console.dir(e),await d().success({title:"UPDATED CAR TYPE",message:"You have successfully updated a car type"}),p().ajax("GET",`${location.origin}/settings/cars/table/`,{target:"#table",swap:"innerHTML"}),p().ajax("GET",`${location.origin}/settings/cars/`,{target:"#slider",swap:"innerHTML"})})).catch((async e=>{await d().error({title:"UPDATING CAR TYPE FAILED",message:e.message})})),this.openUpdateCreateCar=!1},async sendPushNotification(){this.pushLoading=!0;const e=this.$refs.pushForm,t=e.action,a=e.dataset.csrf;let o=new FormData(e);await e.querySelectorAll("[name]").forEach((e=>{o.append(e.name,e.value)})),await h(3e3),await r.post(t,o,{headers:{CSRFToken:a}}).then((async e=>{await d().success({title:"PUSH NOTIFICATION SENT",balloon:!0,position:"topRight",animateInside:!0,message:e.data.message}),this.pushLoading=!1})).catch((async e=>{await d().error({title:"PUSH NOTIFICATION SENT",balloon:!0,position:"topRight",animateInside:!0,message:"Something went wrong while sending the push notification. Please try again soon."}),this.pushLoading=!1}))},show_item(e){return""===this.searchWord||e.textContent.includes(this.search)},fullscreenMode(){document.fullscreenElement?(document.fullscreenElement||document.mozFullScreenElement||document.msFullScreenElement||document.webkitFullScreenElement)&&(this.fullscreen=!1,window.document.exitFullscreen()):(this.fullscreen=!0,document.getElementById("body").requestFullscreen())},async dp(e){this.profile_img=e},alertCompleteVerification(){d().info({title:"VERIFICATION INCOMPLETE",balloon:!0,position:"topRight",animateInside:!0,message:"Complete your verification to be able to start taking rides."})},async initState(e,t,a){if(console.log(e),1===e?(this.switch_to_driver=!0,this.driverText="Driver Mode"):2===e&&(this.switch_to_driver=!1,this.driverText="Rider Mode"),this.buyTicket="True"!==t&&("False"===t||null),this.isVerified=a,document.getElementById("header")){let e=document.getElementById("main"),t=(document.getElementById("header"),document.getElementById("navbar"));if(document.getElementById("userMenu")&&t){let e=document.getElementById("userMenu"),a=t.offsetHeight;e.style.top=`${a}px`}e.style.minHeight="100vh"}await r.get("/inbox/notifications/api/unread_list/?max=20/").then((e=>{this.notifications=e.data.unread_list,this.hasUnreadNotifications=e.data.unread_count>0})).catch((e=>console.log(e))),this.scrollNav},async profileChosen(e){this.fileToDataUrl(e,(e=>this.profile_img=e));const t=this.$refs.dpForm,a=t.action,o=t.dataset.token;let i=new FormData(t);await t.querySelectorAll("[name]").forEach((e=>{i.append(e.name,e.value)})),console.dir(i),await r.patch(a,i,{headers:{Authorization:`Token ${o}`}}).then((async function(e){console.log(e),p().ajax("GET","/users/get-process/",{target:"#isVerified",swap:"outerHTML"}),200!==e.status&&201!==e.status||await d().success({title:"PHOTO UPDATE",balloon:!0,position:"topRight",animateInside:!0,message:e.data.message}),await h(3e3)})).catch((async function(e){return console.log(e),e.message?(await d().error({title:"PROFILE UPDATE",balloon:!0,position:"topRight",animateInside:!0,message:e.message}),void await h(3e3)):e.response.data.message?(await d().error({title:"PROFILE UPDATE",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.message}),void await h(3e3)):e.response.data.non_field_errors?(await d().error({title:"PROFILE UPDATE",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.non_field_errors}),void await h(3e3)):void await h(3e3)}))},async postChosen(e){this.fileToDataUrl(e,(e=>this.post_img=e))},fileToDataUrl(e,t){if(!e.target.files.length)return;let a=e.target.files[0],o=new FileReader;o.readAsDataURL(a),o.onload=e=>t(e.target.result)},async markRead(e){await r.get(`/${e}/`).then((e=>{200===e.status&&(d().info({title:"NOTIFICATION READ",message:e.data.message}),this.hasUnreadNotifications=!1)})).catch((e=>{d().error({title:"NOTIFICATION ERROR",message:e})}))},async switchForm(){this.switch_to_driver=!this.switch_to_driver,!0===this.switch_to_driver?this.driverText="Driver":this.driverText="Rider";const e=this.$refs.switchForm,t=e.action,a=new FormData(e),o=e.dataset.token;!0===this.switch_to_driver?a.append("toggle",!0):a.append("toggle",!1),console.dir(a),!0===this.switch_to_driver?(f="DRIVER MODE",w="You have switched to use the app as a driver"):(f="RIDER MODE",w="You have switched to use the app as a rider"),await r.post(t,a,{headers:{Authorization:`Token ${o}`}}).then((async function(e){console.log(e),200!==e.status&&201!==e.status||await d().success({title:f,balloon:!0,position:"topRight",animateInside:!0,message:w}),await h(5e3)})).catch((async function(e){console.log(e),await d().error({title:f,balloon:!0,position:"topRight",animateInside:!0,message:e.message}),await h(3500)}))},scrollNav(){let e=window.pageYOffset;e<=0&&(this.showNav=!1,this.lastScroll=e),e>this.lastScroll?(this.showNav=!0,this.navTop=!0,this.lastScroll=e):e<this.lastScroll&&(this.showNav=!1,this.navTop=!1,this.lastScroll=e),this.lang=!1,this.search=!1},openNotifBar(){this.notif=!this.notif;const e=document.getElementById("notifBar");this.notif?(e.classList.remove("w-0"),e.classList.add("w-56","duration-500","p-4","transition:ease-in-out")):(e.classList.remove("w-56","p-4"),e.classList.add("w-0","duration-500","transition:ease-in-out"))},openAppsMenu(){this.apps=!this.apps},openUserMenu(){this.uMenu=!this.uMenu},showSearchBar(){this.search=!this.search},showLanguages(){this.lang=!this.lang},openMenuBar(){this.menu=!this.menu},postUpdateText(){return this.loading?"Processing...":"Update"},postCreateText(){return this.loading?"Processing...":"Create Post"},formText(){return this.loading?"Processing...":"Login"},pushText(){return this.loading?"Processing...":"Send"}}}function E(e){return new window.Promise((t=>setTimeout(t,e)))}function R(e){return new window.Promise((t=>setTimeout(t,e)))}function T(e){return new window.Promise((t=>setTimeout(t,e)))}function I(e){return new window.Promise((t=>setTimeout(t,e)))}function D(e){return new window.Promise((t=>setTimeout(t,e)))}function A(e){return new window.Promise((t=>setTimeout(t,e)))}function v(){p().ajax("GET","/users/get-process/",{target:"#isVerified",swap:"outerHTML"}),p().ajax("GET","/users/get-profile-card/",{target:"#p-card",swap:"outerHTML"})}let _="",F="";function C(e){return/^3[47][0-9]{13}$/.test(e)?"American Express":/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/.test(e)?"Diners Club":/^4[0-9]{12}(?:[0-9]{3})?$/.test(e)?"Visa":/^5[1-5][0-9]{14}$/.test(e)?"Mastercard":/^5061/.test(e)?"Verve":/^6(?:011|5[0-9]{2})[0-9]{12}$/.test(e)?"Discover":/^(50[0-9]{4}|60699[0-9]{10})$/.test(e)?"Aura":"Unknown"}function S(e){return new window.Promise((t=>setTimeout(t,e)))}function L(e){return new window.Promise((t=>setTimeout(t,e)))}window.location.protocol;const b={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};function O(e,t,a,o){if(U.length>0){let i={origin:a,destination:o,waypoints:U,optimizeWaypoints:!0,travelMode:"DRIVING",avoidTolls:!0};t.route(i,(function(t,a){console.log(t),console.log(a),"OK"==a&&e.setDirections(t)}))}else{let i={origin:a,destination:o,optimizeWaypoints:!0,travelMode:"DRIVING",avoidTolls:!1};t.route(i,(function(t,a){console.log(t),console.log(a),"OK"==a&&e.setDirections(t)}))}}let P,k,$,N,x,M=[],U=[],G=0,B=0;function H(e){return new window.Promise((t=>setTimeout(t,e)))}function q(e){return new window.Promise((t=>setTimeout(t,e)))}var z=a(3631),j=a(4306),W=a(2995),Z=a(4394),K=a(8174),Y=(a(3413),a(6030)),V=a(2306),X=a.n(V),J=a(1248),Q=a.n(J),ee=(a(886),a(9755)),te=a.n(ee);window.htmx=p(),window.tinymce=i(),window.lottieweb=Q(),window.anime=Y.Z,window.ScrollMagic=X(),window.ethers=K,window.axios=r,window.Swiper=m.ZP,window.iziToast=d(),window.jQuery=te(),j.Z.plugin(Z.Z),j.Z.plugin(W.Z),window.Alpine=j.Z,j.Z.data("SignupForm",(function(){return{loading:!1,togglePassword:!1,step:1,is_driver:null,formError:!1,formData:{is_driver:"",first_name:"",last_name:"",middle_name:"",gender:"",username:"",email:"",password1:"",password2:"",gave_consent:!1},hasUppercase:!1,hasDigit:!1,hasSpecialChar:!1,checkPasswordMatch:!1,checkEmail:!1,serverCheckPasswordMatch(){this.checkPasswordMatch=this.formData.password1.length===this.formData.password2.length&&this.formData.password1===this.formData.password2},serverCheckEmail(){this.checkEmail=this.formData.email.length>1&&/[@]/.test(this.formData.email)&&!this.formData.email.includes("admin@dropsride.com")&&!this.formData.email.includes("dropsride.com")},next(){if(null!==this.formData.is_driver&&this.formData.first_name.length>1&&this.formData.last_name.length>1&&this.formData.middle_name.length>1)return this.step++;d().warning({title:"FORM ERROR",balloon:!0,position:"topRight",animateInside:!0,message:"Please fill all fields. They are required and cannot be left blank"})},back(){this.step--},async submitForm(){if(this.checkServerValidity){this.loading=!0;const e=this.$refs.form,t=e.action,a=e.dataset.csrf,o=e.dataset.redirect;let i=new FormData(e);return e.querySelectorAll("[name]").forEach((e=>{"is_driver"===e.name?(console.log("Axios signup form",this.formData.is_driver),"True"===this.formData.is_driver?i.append("is_driver",!0):i.append("is_driver",!1)):"userState"!==e.name&&"is_driver"!==e.name&&i.append(e.name,e.value)})),await r.post(t,i,{headers:{"X-CSRFToken":a}}).then((async function(e){if(console.log(e),200!==e.status&&201!==e.status||await d().success({title:"REGISTRATION COMPLETED",balloon:!0,position:"topRight",animateInside:!0,message:"You have successfully registered on our platform, please do well to fill in required profile information to get verified quickly."}),await c(5e3),o)return window.location.replace(`${window.location.origin}${o}`)})).catch((async function(e){return console.log(e),e.response.data.email||e.response.data.username?(await d().error({title:"REGISTRATION FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.email}),void await c(3500)):e.response.data.non_field_errors?(await d().error({title:"REGISTRATION FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.non_field_errors}),void await c(3500)):(await d().error({title:"REGISTRATION FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.message}),void await c(3500))})),void(this.loading=!1)}await d().info({title:"FORM ERROR",balloon:!0,position:"topRight",animateInside:!0,message:"Please fill all fields correctly. They are required and cannot be left blank"})},checkServerValidity(){return this.hasDigit=/[0-9]/.test(this.formData.password1),this.hasSpecialChar=/[@/*$%.]/.test(this.formData.password1),this.hasUppercase=/[A-Z]/.test(this.formData.password1),this.serverCheckPasswordMatch,this.serverCheckEmail,this.hasDigit===this.hasSpecialChar===this.hasUppercase===this.checkPasswordMatch===this.checkEmail},formText(){return this.loading?"Processing...":"Submit"}}})),j.Z.data("ContactForm",(function(){return{processingContact:!1,async submitForm(){this.processingContact=!0;const e=this.$refs.contactForm,t=document.getElementById("contact"),a=e.action,o=e.dataset.csrf;let i=new FormData(e);e.querySelectorAll("[name]").forEach((e=>{i.append(e.name,e.value)})),console.log(i),await r.post(a,i,{headers:{"X-CSRFToken":o}}).then((async function(a){t.innerHTML=e.outerHTML,await(3600,new window.Promise((e=>setTimeout(e,3600)))),await d().success({title:"Email Sent Successful",balloon:!0,position:"topRight",animateInside:!0,message:a.data.message})})).catch((function(e){d().error({title:"Email Sending Incomplete",balloon:!0,position:"topRight",animateInside:!0,message:`Something wrong happened: ${e}`})})),this.processingContact=!1},getBtnText(){return this.processingContact?"Processing...":"Submit"}}})),j.Z.data("ConfirmEmailForm",(function(){return{loading:!1,async submitForm(){this.loading=!0;const e=this.$refs.form,t=e.action,a=e.dataset.csrf,o=e.dataset.redirect;let i=new FormData(e);e.querySelectorAll("[name]").forEach((e=>{i.append(e.name,e.value)})),await r.post(t,i,{headers:{"X-CSRFToken":a}}).then((async function(e){if((200===e.status||201===e.status)&&(await d().success({title:"EMAIL VERIFICATION SUCCESSFUL",balloon:!0,position:"topRight",animateInside:!0,message:"You have successfully verified your email address. Login Now!"}),await I(5e3),o))return window.location.replace(`${window.location.origin}${o}`)})).catch((async function(e){return console.log(e),e.response.data.key?(await d().error({title:"EMAIL VERIFIACTION FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.key}),void await I(10500)):(await d().error({title:"EMAIL VERIFIACTION FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.non_field_error}),void await I(10500))})),this.loading=!1},formText(){return this.loading?"Processing...":"Verify Email"}}})),j.Z.data("LoginForm",(function(){return{loading:!1,togglePassword:!1,formError:!1,formData:{login:"",remember:!1,password:""},checkEmail(){return this.formData.login.length>4&&!0===/[@]/.test(this.formData.login)},async submitForm(){if(this.formData.login.length>1&&this.formData.password.length>4){this.loading=!0;const e=this.$refs.form,t=e.action,a=e.dataset.csrf,o=e.dataset.redirect;let i=new FormData(e);return e.querySelectorAll("[name]").forEach((e=>{"login"===e.name&&(i.append("email",e.value),i.append(e.name,e.value)),i.append(e.name,e.value),console.log(e.value)})),console.log(i),await r.post(t,i,{headers:{"X-CSRFToken":a}}).then((async function(e){if(console.log(e),200!==e.status&&201!==e.status||await d().success({title:"AUTHENTICATED SUCCESSFULLY",balloon:!0,position:"topRight",animateInside:!0,message:`Authorization Token: <strong class="font-black">${e.data.key}</strong>`}),await T(5e3),o)return window.location.replace(`${window.location.origin}${o}`)})).catch((async function(e){return e.response.data.login?(await d().error({title:"AUTHENTICATION FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.login}),void await T(3500)):e.response.data.password?(await d().error({title:"AUTHENTICATION FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.password}),void await T(3500)):(await d().error({title:"AUTHENTICATION FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.non_field_errors}),void await T(3500))})),void(this.loading=!1)}await d().info({title:"FORM ERROR",balloon:!0,position:"topRight",animateInside:!0,message:"Please fill all fields. Passwords must be 4 characters long"})},checkServerValidity(){this.checkEmail},formText(){return this.loading?"Processing...":"Login"}}})),j.Z.data("PChangeForm",(function(){return{loading:!1,togglePassword:!1,formData:{old_password:"",new_password1:"",new_password2:""},async validateField(e,t,a){let o=new FormData(e);o.append("__field_name__",t.name),await r.post(e.action,o).then((async function(e){let o=e.data.errors,i=document.getElementById(`error-wrapper-${t.name}`);if(0===o.length)a=!1,console.log(a),i.classList.add("hidden"),i&&(i.innerHTML="");else if(a=!0,console.log(a),i.classList.remove("hidden"),i.classList.add("flex"),i){let e="";for(let t=0;t<o.length;t++)e+=`${o[t]}`;i.innerHTML=e}})),this.formError=a,console.log(a)},async submitForm(){this.loading=!0;const e=this.$refs.form,t=e.action,a=e.dataset.csrf,o=e.dataset.redirect;let i=new FormData(e);e.querySelectorAll("[name]").forEach((e=>{i.append(e.name,e.value)})),await r.post(t,i,{headers:{"X-CSRFToken":a}}).then((async function(e){if(200!==e.status&&201!==e.status||await d().success({title:"PASSWORD CHANGED SUCCESSFULLY",balloon:!0,position:"topRight",animateInside:!0,message:"Successfully Changed your password."}),await E(5e3),o)return window.location.replace(`${window.location.origin}${o}`)})).catch((async function(e){return console.log(e),e.response.data.old_password?(await d().error({title:"PASSWORD CHANGE FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.old_password}),void await E(3500)):e.response.data.new_password1?(await d().error({title:"PASSWORD CHANGE FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.new_password1}),void await E(3500)):e.response.data.new_password2?(await d().error({title:"PASSWORD CHANGE FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.new_password2}),void await E(3500)):(await d().error({title:"PASSWORD CHANGE FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.non_field_errors}),void await E(3500))})),this.loading=!1},formText(){return this.loading?"Processing...":"Change Password"}}})),j.Z.data("ResetPasswordForm",(function(){return{loading:!1,togglePassword:!1,formData:{email:"",uid:"",token:"",new_password1:"",new_password2:""},async validateField(e,t,a){let o=new FormData(e);o.append("__field_name__",t.name),await r.post(e.action,o).then((async function(e){let o=e.data.errors,i=document.getElementById(`error-wrapper-${t.name}`);if(0===o.length)a=!1,console.log(a),i.classList.add("hidden"),i&&(i.innerHTML="");else if(a=!0,console.log(a),i.classList.remove("hidden"),i.classList.add("flex"),i){let e="";for(let t=0;t<o.length;t++)e+=`${o[t]}`;i.innerHTML=e}})),this.formError=a,console.log(a)},async submitForm(){this.loading=!0;const e=this.$refs.form,t=e.action,a=e.dataset.csrf,o=e.dataset.redirect;let i=new FormData(e);e.querySelectorAll("[name]").forEach((e=>{i.append(e.name,e.value)})),await r.post(t,i,{headers:{"X-CSRFToken":a}}).then((async function(e){if(200!==e.status&&201!==e.status||await d().success({title:"PASSWORD RESET SUCCESSFULLY",balloon:!0,position:"topRight",animateInside:!0,message:"Check your email for the Reset your password."}),await R(5e3),o)return window.location.replace(`${window.location.origin}${o}`)})).catch((async function(e){return console.log(e),e.response.data.email?(await d().error({title:"PASSWORD RESET FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.email}),void await R(3500)):e.response.data.new_password1?(await d().error({title:"PASSWORD RESET FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.new_password1}),void await R(3500)):e.response.data.new_password2?(await d().error({title:"PASSWORD RESET FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.new_password2}),void await R(3500)):e.response.data.uid?(await d().error({title:"PASSWORD RESET FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.uid}),void await R(3500)):e.response.data.token?(await d().error({title:"PASSWORD RESET FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.token}),void await R(3500)):e.response.data.non_field_errors?(await d().error({title:"PASSWORD RESET FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.non_field_errors}),void await R(3500)):(await d().error({title:"PASSWORD RESET FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.message}),void await R(3500))})),this.loading=!1},formText(){return this.loading?"Processing...":"Reset Password"}}})),j.Z.data("SubscriptionForm",(function(){return{sub_loading:!1,showTicketModal:!1,valid:!1,chargeForm:!0,otpForm:!1,pinForm:!1,ticketData:{type:"card",authorization:"",amount:0,ref:""},async completeSubscription(){const e=this.$refs.tiketForm,t=e.action,a=e.dataset.token;let o=new FormData(e);e.querySelectorAll("[name]").forEach((e=>{"pin"===e.name||e.name,o.append(e.name,e.value)})),await H(3e3),await r.post(t,o,{headers:{Authorization:`Token ${a}`}}).then((async e=>(await d().success({title:"TICKET ENABLLED",message:e.data.message}),this.sub_loading=!1,await H(3e3),window.location.reload()))).catch((async e=>(await d().error({title:"PAYMENT FAILED",mssage:e.response.message}),this.sub_loading=!1,await H(3e3),window.location.reload())))},async chargeSubscription(){this.sub_loading=!0;const e=this.$refs.tiketForm,t=e.action,a=e.dataset.token;let o=new FormData(e);e.querySelectorAll("[name]").forEach((e=>{"radio"===e.type?o.append(e.name,this.ticketData.type):"authorization_code"===e.name?o.append(e.name,this.ticketData.authorization):o.append(e.name,e.value)})),await H(3e3),await r.post(t,o,{headers:{Authorization:`Token ${a}`}}).then((async e=>{if(e.data.sub_id&&!e.data.message.includes("otp")&&!e.data.message.includes("pin"))return await d().success({title:"TICKET ENABLLED",message:e.data.message}),this.sub_loading=!1,await H(3e3),window.location.reload();e.data.message.includes("OTP")?(this.chargeForm=!1,this.otpForm=!0,this.ticketData.ref=e.data.ref):e.data.message.includes("PIN")&&(this.chargeForm=!1,this.pinForm=!0,this.ticketData.ref=e.data.ref),this.sub_loading=!1,await H(3e3)})).catch((async e=>{await d().error({title:"PAYMENT FAILED",mssage:e.response.message}),this.sub_loading=!1,this.showTicketModal=!1,await H(3e3)}))},formText(){return this.loading?"Processing...":"Pay Now"},pinText(){return this.loading?"Processing...":"Submit PIN"},otpText(){return this.loading?"Processing...":"Submit OTP"}}})),j.Z.data("Google",(function(){return{drivers:{},waypoint:0,uid:null,estAmount:0,map:null,marker:null,w1_marker:null,w2_marker:null,d_marker:null,driver_marker:null,riderAddress:"",pickUpAutoComplete:null,pickupCO:"",dropOffAddress:"",dropOffAutoComplete:null,destCO:"",waypoint1Autocomplete:null,waypoint2Autocomplete:null,formStep:1,tripData:{car_type:0,state:"",amount:"",pay_method:"",waypoint1_address:"",waypoint2_address:"",waypoint1_point:"",waypoint2_point:""},userFormData:{address:"",town:"",county:"",state:"",longitude:"",latitude:"",post_code:"",country:""},kinFormData:{address:"",town:"",county:"",state:"",longitude:"",latitude:"",post_code:"",country:""},userAutocomplete:null,kinAutocomplete:null,resultData:{},latitude:null,longitude:null,async createTrip(){const e=this.$refs.mapForm,t=e.action,a=e.dataset.token;let o,i=new FormData(e);e.querySelectorAll("[name]").forEach((e=>{i.append(e.name,e.value)}));let n=1;await r.post(t,i,{headers:{Authorization:`Token ${a}`}}).then((async function(e){o=e.data.uuid,n=2,console.log(e.data.data),await L(3500),200!==e.status&&201!==e.status||await p().ajax("GET",`/trips/${e.data.data.uuid}/update/`,{target:"#uDetail",swap:"outerHTML"})})).catch((async function(e){return console.log(e),e.response.data.non_field_errors?(await d().error({title:"TRIPS FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.non_field_errors}),void await L(3500)):(await d().error({title:"TRIPS FAILED/ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.message}),void await L(3500))})),this.loading=!1,this.uid=o,this.formStep=n},async assignDriver(){const e={url:window.location.origin+"/static/vendors/images/icons/passenger.png",scaledSize:new window.google.maps.Size(45,45)},t={url:window.location.origin+"/static/vendors/images/icons/driver.png",scaledSize:new window.google.maps.Size(45,45)},a=(window.location.origin,new window.google.maps.Size(45,45),this.$refs.mapForm),o=a.action,i=a.dataset.token;let n,s=new FormData(a);a.querySelectorAll("[name]").forEach((e=>{"car_type"===e.name?s.append(e.name,this.tripData.car_type):"car_type"!==e.name&&s.append(e.name,e.value)}));let l=1;await r.post(o,s,{headers:{Authorization:`Token ${i}`}}).then((async function(a){n=a.data.uuid,l=2,console.log(a),200===a.status&&201===a.status&&(M=[],this.service=new window.google.maps.DirectionsService,this.render=new window.google.maps.DirectionsRenderer({suppressMarkers:!0}),this.render.setMap(P),M[0]=new window.google.maps.Marker({position:{lat:parseFloat(a.data.rider_lat),lng:parseFloat(a.data.rider_lng)},map:P,icon:e,draggable:!0}),M[1]=new window.google.maps.Marker({position:{lat:parseFloat(a.data.driver_lat),lng:parseFloat(a.data.driver_lng)},map:P,icon:t,draggable:!0}),$=a.data.data.pickup,M[0].setPosition({lat:parseFloat(a.data.rider_lat),lng:parseFloat(a.data.rider_lng)}),k=a.data.data.dropoff,M[1].setPosition({lat:parseFloat(a.data.driver_lat),lng:parseFloat(a.data.driver_lng)}),O(this.render,this.service,$,k))})).catch((async function(e){console.log(e)})),this.loading=!1,this.formStep=3},initializeAutoComplete(){void 0===window.google?document.addEventListener("google:init",(()=>{this.initUserAutocomplete(),this.initKinAutocomplete()})):(this.initUserAutocomplete(),this.initKinAutocomplete())},initializeMap(){void 0===window.google?document.addEventListener("google:init",(()=>{this.initMap()})):this.initMap()},async initMap(){await L(3e3);window.navigator.geolocation,window.navigator.geolocation.getCurrentPosition((e=>{console.log(`LatLong: ${e.coords.latitude} - ${e.coords.longitude}`),this.latitude=e.coords.latitude,this.longitude=e.coords.longitude,this.latlng=`${e.coords.latitude},${e.coords.longitude}`,console.log(this.latitude,this.longitude),this.showMap(e.coords.latitude,e.coords.longitude)}),(e=>{d().error({title:"[GEOLOCATION API]",balloon:!0,position:"topRight",animateInside:!0,message:`ERROR${e.code}: ${e.message}`})}),b)},showMap(e,t){const a={url:window.location.origin+"/static/vendors/images/icons/passenger.png",scaledSize:new window.google.maps.Size(45,45)},o={url:window.location.origin+"/static/vendors/images/icons/driver.png",scaledSize:new window.google.maps.Size(45,45)},i={url:window.location.origin+"/static/vendors/images/icons/destination.png",scaledSize:new window.google.maps.Size(45,45)};console.log(e,t),this.pickupCO={lat:parseFloat(e),lng:parseFloat(t)},$={lat:parseFloat(e),lng:parseFloat(t)},k={lat:parseFloat(e),lng:parseFloat(t)},document.getElementById("id_p_point_latitude").value=e,document.getElementById("id_p_point_longitude").value=t;let n=new window.google.maps.Geocoder;console.log("PICKUP: ",this.pickupCO),n.geocode({location:this.pickupCO},(function(e,t){if(t==window.google.maps.GeocoderStatus.OK){let t=e[0].formatted_address;console.log(e);for(var a=0;a<e.length;a++)void 0!==e[0].address_components[6]&&(window.document.getElementById("id_state").value=e[0].address_components[4].long_name);window.document.getElementById("id_address").value=t}})),P=new window.google.maps.Map(document.getElementById("map"),{zoom:12,zoomControl:!1,heading:320,tilt:-47.5,disableDefaultUI:!0,center:this.pickupCO,styles:[{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit.station",stylers:[{visibility:"off"}]}],disableDoubleClickZoom:!0,streetViewControl:!1}),this.map=P,async function e(){r.get("/api/users/drivers/").then((async t=>{console.log(t);for(let e=0;e<t.data.data.length;e++){console.log("response",`${t.data.data[e].lat} - ${t.data.data[e].lng}`);let a={lat:parseFloat(t.data.data[e].lat),lng:parseFloat(t.data.data[e].lng)};M[t.data.data[e].id]=new window.google.maps.Marker({position:a,map:P,icon:o,draggable:!0}),M[t.data.data[e].id].setPosition(a)}await L(2500),await e()})).catch((async t=>{console.log(t),t.response.data?d().error({title:"ERROR CONNECTING TO DRIVERS",message:t.response.data.message}):console.log(t.message),await L(2500),await e()}))}(),this.service=new window.google.maps.DirectionsService,this.render=new window.google.maps.DirectionsRenderer({suppressMarkers:!0}),this.render.setMap(P),(new window.google.maps.TrafficLayer).setMap(P),(new window.google.maps.TransitLayer).setMap(P),M[0]=new window.google.maps.Marker({position:$,map:P,icon:a,draggable:!0}),M[1]=new window.google.maps.Marker({map:P,icon:i,draggable:!0}),M[2]=new window.google.maps.Marker({map:P,draggable:!1}),M[3]=new window.google.maps.Marker({map:P,draggable:!1}),this.marker=M[0],this.d_marker=M[1],this.w1_marker=M[2],this.w2_marker=M[3],window.google.maps.event.addListener(this.marker,"dragend",(e=>{this.marker.setPosition({lat:parseFloat(e.latLng.lat().toFixed(6)),lng:parseFloat(e.latLng.lng().toFixed(6))}),document.getElementById("id_p_point_latitude").value=parseFloat(e.latLng.lat().toFixed(6)),document.getElementById("id_p_point_longitude").value=parseFloat(e.latLng.lng().toFixed(6)),P.panTo(e.latLng),this.pickupCO=e.latLng,$=e.latLng,n.geocode({location:e.latLng},(function(e,t){if(t==window.google.maps.GeocoderStatus.OK){let t=e[0].formatted_address;window.document.getElementById("id_address").value=t}})),this.riderAddress=window.document.getElementById("id_address").value,console.log(`"Riders Address form PICKUP DRAG", ${this.riderAddress}`),O(this.render,this.service,$,k)})),window.google.maps.event.addListener(this.d_marker,"dragend",(e=>{this.d_marker.setPosition({lat:parseFloat(e.latLng.lat().toFixed(6)),lng:parseFloat(e.latLng.lng().toFixed(6))}),document.getElementById("d_point_latitude").value=parseFloat(e.latLng.lat().toFixed(6)),document.getElementById("d_point_longitude").value=parseFloat(e.latLng.lng().toFixed(6)),P.panTo(e.latLng),this.destCO=e.latLng,k=e.latLng,n.geocode({location:e.latLng},(function(e,t){if(t==window.google.maps.GeocoderStatus.OK){let t=e[0].formatted_address;window.document.getElementById("id_address2").value=t}})),this.dropOffAddress=window.document.getElementById("id_address2").value,console.log(`"Drop off address from DROPOFF DRAG", ${this.destCO}`),O(this.render,this.service,this.pickupCO,this.destCO)})),this.getPickUpAddressName(),this.getDropOffAddressName(),this.getWaypoint1AddressName(),this.getWaypoint2AddressName(),"geolocation"in window.navigator?window.navigator.geolocation.watchPosition((e=>{M[0].setPosition({lat:e.coords.latitude,lng:e.coords.longitude}),this.pickupCO={lat:parseFloat(e.coords.latitude),lng:parseFloat(e.coords.longitude)},O(this.render,this.service,this.pickupCO,this.destCO),P.panTo({lat:e.coords.latitude,lng:e.coords.longitude})}),(e=>{d().error({title:"[GEOLOCATION API]",balloon:!0,position:"topRight",animateInside:!0,message:`ERROR${e.code}: ${e.message}`})})):d().info({title:"[GEOLOCATION SUPPORT]",balloon:!0,position:"topRight",animateInside:!0,message:"Geolocation is not supported by your browser"})},getWaypoint1AddressName(){this.waypoint1Autocomplete=new window.google.maps.places.Autocomplete(this.$refs.waypoint_1,{types:["address"],componentRestrictions:{country:["ng","uk","us","sa","gh"]}}),window.google.maps.event.addListener(this.waypoint1Autocomplete,"place_changed",(()=>this.waypoint1UpChanged(this.waypoint1Autocomplete.getPlace())))},waypoint1UpChanged(e){const t=document.createRange().createContextualFragment(e.adr_address);this.tripData.waypoint1_address=t.textContent,U[0]={location:t.textContent,stopover:!0};const a=this.render,o=this.service;let i,n;(new window.google.maps.Geocoder).geocode({address:this.tripData.waypoint1_address},(function(e,t){t==window.google.maps.GeocoderStatus.OK&&(i=e[0].geometry.location.lat(),n=e[0].geometry.location.lng(),M[2].setPosition({lat:i,lng:n}),P.setZoom(15),P.panTo({lat:i,lng:n}),document.getElementById("id_waypoint1_point_latitude").value=parseFloat(i),document.getElementById("id_waypoint1_point_longitude").value=parseFloat(n),N={lat:parseFloat(i),lng:parseFloat(n)},console.log(`waypoint 1 coordinates ${M[2]}`),O(a,o,$,k))}))},getWaypoint2AddressName(){this.waypoint2Autocomplete=new window.google.maps.places.Autocomplete(this.$refs.waypoint_2,{types:["address"],componentRestrictions:{country:["ng","uk","us","sa","gh"]}}),window.google.maps.event.addListener(this.waypoint2Autocomplete,"place_changed",(()=>this.waypoint2UpChanged(this.waypoint2Autocomplete.getPlace())))},waypoint2UpChanged(e){const t=document.createRange().createContextualFragment(e.adr_address);this.tripData.waypoint2_address=t.textContent,U[1]={location:t.textContent,stopover:!0};const a=this.render,o=this.service;let i,n;(new window.google.maps.Geocoder).geocode({address:this.tripData.waypoint2_address},(function(e,t){t==window.google.maps.GeocoderStatus.OK&&(i=e[0].geometry.location.lat(),n=e[0].geometry.location.lng(),document.getElementById("id_waypoint2_point_latitude").value=parseFloat(i),document.getElementById("id_waypoint2_point_longitude").value=parseFloat(n),M[3].setPosition({lat:i,lng:n}),P.setZoom(15),P.panTo({lat:i,lng:n}),x={lat:parseFloat(i),lng:parseFloat(n)},console.log(`waypoint 2 coordinates ${M[3]}`),O(a,o,$,k))}))},getPickUpAddressName(){this.pickUpAutoComplete=new window.google.maps.places.Autocomplete(this.$refs.pickUp,{types:["address"],componentRestrictions:{country:["ng","uk","us","sa","gh"]}}),window.google.maps.event.addListener(this.pickUpAutoComplete,"place_changed",(()=>this.pickUpChanged(this.pickUpAutoComplete.getPlace())))},pickUpChanged(e){const t=document.createRange().createContextualFragment(e.adr_address);this.riderAddress=t.textContent,this.tripData.state=t.querySelector(".region")?t.querySelector(".region").innerHTML:"";const a=this.render,o=this.service;let i,n;(new window.google.maps.Geocoder).geocode({address:this.riderAddress},(function(e,t){t==window.google.maps.GeocoderStatus.OK&&(i=e[0].geometry.location.lat(),n=e[0].geometry.location.lng(),document.getElementById("id_p_point_latitude").value=parseFloat(i),document.getElementById("id_p_point_longitude").value=parseFloat(n),M[0].setPosition({lat:i,lng:n}),P.setZoom(15),P.panTo({lat:i,lng:n}),$={lat:parseFloat(i),lng:parseFloat(n)},console.log(`drop coordinates ${k}`),O(a,o,$,k))}))},getDropOffAddressName(){this.dropOffAutoComplete=new window.google.maps.places.Autocomplete(this.$refs.dropOff,{types:["address"],componentRestrictions:{country:["ng","uk","us","sa","gh"]}}),window.google.maps.event.addListener(this.dropOffAutoComplete,"place_changed",(()=>this.dropOffChanged(this.dropOffAutoComplete.getPlace())))},dropOffChanged(e){const t=document.createRange().createContextualFragment(e.adr_address);this.dropOffAddress=t.textContent;const a=this.render,o=this.service;(new window.google.maps.Geocoder).geocode({address:this.dropOffAddress},(function(e,t){t==window.google.maps.GeocoderStatus.OK&&(G=e[0].geometry.location.lat(),B=e[0].geometry.location.lng(),document.getElementById("id_d_point_latitude").value=parseFloat(G),document.getElementById("id_d_point_longitude").value=parseFloat(B),M[1].setPosition({lat:G,lng:B}),console.log(G),P.setZoom(15),k={lat:parseFloat(G),lng:parseFloat(B)},P.panTo({lat:G,lng:B}),O(a,o,$,k))}))},stopWatch(){window.navigator.geolocation.stopWatch(void 0)},resetData(){this.userFormData={address:"",town:"",county:"",state:"",longitude:"",latitude:"",post_code:"",country:""},this.kinFormData={address:"",town:"",county:"",state:"",longitude:"",latitude:"",post_code:"",country:""}},initUserAutocomplete(){this.userAutocomplete=new window.google.maps.places.Autocomplete(this.$refs.userAddress,{types:["address"],componentRestrictions:{country:["ng"]}}),window.google.maps.event.addListener(this.userAutocomplete,"place_changed",(()=>this.userPlaceChanged(this.userAutocomplete.getPlace())))},initKinAutocomplete(){this.kinAutocomplete=new window.google.maps.places.Autocomplete(this.$refs.kinAddress,{types:["address"],componentRestrictions:{country:["ng"]}}),window.google.maps.event.addListener(this.kinAutocomplete,"place_changed",(()=>this.kinPlaceChanged(this.kinAutocomplete.getPlace())))},userPlaceChanged(e){this.resultData=e,this.resetData();const t=document.createRange().createContextualFragment(e.adr_address);console.dir(t.textContent),this.userFormData.address=t.textContent,this.userFormData.town=t.querySelector(".locality")?t.querySelector(".locality").innerHTML:"",this.userFormData.county=t.querySelector(".extended-address")?t.querySelector(".extended-address").innerHTML:"",this.userFormData.state=t.querySelector(".region")?t.querySelector(".region").innerHTML:"",this.userFormData.country=t.querySelector(".country-name")?t.querySelector(".country-name").innerHTML:"",this.userFormData.post_code=t.querySelector(".postal-code")?t.querySelector(".postal-code").innerHTML:"",this.$dispatch("place-chosen",{address:this.userFormData.address,resultResponse:this.resultData});let a=new window.google.maps.Geocoder;console.log(this.userFormData.address),a.geocode({address:this.userFormData.address},(function(e,t){if(t==window.google.maps.GeocoderStatus.OK){let t=e[0].geometry.location.lat(),a=e[0].geometry.location.lng();window.document.getElementById("id_latitude").value=t,window.document.getElementById("id_longitude").value=a}}))},kinPlaceChanged(e){this.resultData=e,this.resetData();const t=document.createRange().createContextualFragment(e.adr_address);console.dir(t.textContent),this.kinFormData.address=t.textContent,this.kinFormData.town=t.querySelector(".locality")?t.querySelector(".locality").innerHTML:"",this.kinFormData.county=t.querySelector(".extended-address")?t.querySelector(".extended-address").innerHTML:"",this.kinFormData.state=t.querySelector(".region")?t.querySelector(".region").innerHTML:"",this.kinFormData.country=t.querySelector(".country-name")?t.querySelector(".country-name").innerHTML:"",this.kinFormData.post_code=t.querySelector(".postal-code")?t.querySelector(".postal-code").innerHTML:"",this.$dispatch("place-chosen",{address:this.kinFormData.address,resultResponse:this.resultData});let a=new window.google.maps.Geocoder;console.log(this.kinFormData.address),a.geocode({address:this.kinFormData.address},(function(e,t){if(t==window.google.maps.GeocoderStatus.OK){let t=e[0].geometry.location.lat(),a=e[0].geometry.location.lng();window.document.getElementById("id_kin_latitude").value=t,window.document.getElementById("id_kin_longitude").value=a}}))}}})),j.Z.data("Default",y),j.Z.data("UpdateForm",(function(){return{loading:!1,edit:!1,editKin:!1,togglePassword:!1,formError:!1,formData:{gender:""},async updateUserForm(){this.loading=!0;const e=this.$refs.uform,t=e.action,a=e.dataset.token;let o=new FormData(e);e.querySelectorAll("[name]").forEach((e=>{o.append(e.name,e.value)})),console.dir(o),await r.patch(t,o,{headers:{Authorization:`token ${a}`}}).then((async function(e){200!==e.status&&201!==e.status||await d().success({title:"PROFILE UPDATE",balloon:!0,position:"topRight",animateInside:!0,message:e.data.message}),await D(5e3),this.edit=!1})).catch((async function(e){e.response.data.message?await d().error({title:"PROFILE UPDATE",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.message}):await d().error({title:"PROFILE UPDATE",balloon:!0,position:"topRight",animateInside:!0,message:e.message}),await D(3500)})),this.loading=!1},formText(){return this.loading?"Processing...":"Login"},updateUserText(){return this.loading?"Processing...":"Update Details"}}})),j.Z.data("UserDetail",(function(){return{loading:!1,editKin:!1,proof_of_ownership_img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTretNFas6G68WjEFj0z_sx3GG665VjBulQ9cIlXIN8Dw&s",vehicle_license_img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTretNFas6G68WjEFj0z_sx3GG665VjBulQ9cIlXIN8Dw&s",autocheck_certificate_img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTretNFas6G68WjEFj0z_sx3GG665VjBulQ9cIlXIN8Dw&s",insurance_img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTretNFas6G68WjEFj0z_sx3GG665VjBulQ9cIlXIN8Dw&s",formError:!1,togglePassword:!1,cardForm:{cvv:"123",month:"12",year:"23",digit:"0000 0000 0000 0000",name:"John Doe",cardType:"Master"},formData:{sms_notification:window.sms_notification,email_notification:window.email_notification,push_notification:window.push_notification},ownershipChosen(e){this.fileToDataUrl(e,(e=>this.proof_of_ownership_img=e))},vlChosen(e){this.fileToDataUrl(e,(e=>this.vehicle_license_img=e))},autoCheckChosen(e){this.fileToDataUrl(e,(e=>this.autocheck_certificate_img=e))},insuranceChosen(e){this.fileToDataUrl(e,(e=>this.insurance_img=e))},fileToDataUrl(e,t){if(!e.target.files.length)return;let a=e.target.files[0],o=new FileReader;o.readAsDataURL(a),o.onload=e=>t(e.target.result)},creditCardMask(){document.getElementById("id_card_no").addEventListener("input",(function(e){e.target.value=e.target.value.replace(/[^\dA-Z]/g,"").replace(/(.{4})/g,"$1 ").trim();let t=e.target.value.toString().replace(/[^\dA-Z]/g,"").replace(/(.{4})/g,"$1").trim();console.log(t);let a=t;""!==a&&(console.log(C(a).toString()),F=C(a).toString(),document.getElementById("id_card_provider").value=F,document.getElementById("cardType").innerHTML="Mastercard"===F?`\n            <img src="/static/bundles/vendors/images/card/master.svg" class="h-8" alt="${F}" />\n            `:"Visa"===F?`\n            <img src="/static/vendors/images/card/visa.svg" class="h-8" alt="${F}" />\n            `:"Verve"===F?`\n            <img src="/static/vendors/images/card/verve.svg" class="h-8" alt="${F}" />\n            `:"Aura"===F?`\n            <img src="/static/vendors/images/card/aura.png" class="h-8" alt="${F}" />\n            `:"American Express"===F?`\n            <img src="/static/vendors/images/card/american-express.svg" class="h-8" alt="${F}" />\n            `:"Diners"===F?`\n            <img src="/static/vendors/images/card/diners.svg" class="h-8" alt="${F}" />\n            `:"Discover"===F?`\n            <img src="/static/vendors/images/card/discover.svg" class="h-8" alt="${F}" />\n            `:"")}))},async updateUserForm(){this.loading=!0;const e=this.$refs.uform,t=e.action,a=e.dataset.token;let o=new FormData(e);await e.querySelectorAll("[name]").forEach((e=>{o.append(e.name,e.value)})),console.dir(o),await r.put(t,o,{headers:{Authorization:`Token ${a}`}}).then((async function(e){console.log(e),200!==e.status&&201!==e.status||await d().success({title:"PROFILE UPDATE",balloon:!0,position:"topRight",animateInside:!0,message:"You have successfully updated your profile detail"}),p().ajax("GET","/users/get-detail/",{target:"#detail",swap:"outerHTML"}),v(),await A(3e3)})).catch((async function(e){return e.message?(await d().error({title:"PROFILE UPDATE",balloon:!0,position:"topRight",animateInside:!0,message:e.message}),void await A(3e3)):e.response.data.message?(await d().error({title:"PROFILE UPDATE",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.message}),void await A(3e3)):e.response.data.non_field_errors?(await d().error({title:"PROFILE UPDATE",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.non_field_errors}),void await A(3e3)):void await A(3e3)})),this.edit=!1,this.loading=!1},async updateCurrency(){this.loading=!0;const e=this.$refs.currency,t=e.action,a=e.dataset.token;let o=new FormData(e);await e.querySelectorAll("[name]").forEach((e=>{o.append(e.name,e.value)})),await r.post(t,o,{headers:{Authorization:`Token ${a}`}}).then((async function(e){return console.log(e),200!==e.status&&201!==e.status||await d().success({title:"CURRENCY SWITCHER",balloon:!0,position:"topRight",animateInside:!0,message:e.data.message}),await A(3e3),p().ajax("GET","/users/get-currency/",{target:"#currencyChanger",swap:"outerHTML"})})).catch((async function(e){console.log(e),await d().error({title:"CURRENCY SWITCHER ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.message}),await A(3e3)})),this.loading=!1},async submitSettings(){this.loading=!0;const e=this.$refs.settings,t=e.action,a=e.dataset.token;let o=new FormData(e);await e.querySelectorAll("[name]").forEach((e=>{"checkbox"===e.type&&(!0===this.formData.sms_notification?o.append("sms_notification",!0):o.append("sms_notification",!1),!0===this.formData.push_notification?o.append("push_notification",!0):o.append("push_notification",!1),!0===this.formData.email_notification?o.append("email_notification",!0):o.append("email_notification",!1))})),_="Notification Updated",await r.patch(t,o,{headers:{Authorization:`Token ${a}`}}).then((async function(e){console.log(e),200!==e.status&&201!==e.status||await d().success({title:"NOTIFICATION SETTINGS",balloon:!0,position:"topRight",animateInside:!0,message:_}),await A(5e3)})).catch((async function(e){console.log(e),await d().error({title:"NOTIFICATION SETTINGS ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.message}),await A(3500)})),this.loading=!1},async updateKinForm(){this.loading=!0;const e=this.$refs.nokForm,t=e.action,a=e.dataset.token;let o=new FormData(e);await e.querySelectorAll("[name]").forEach((e=>{o.append(e.name,e.value)})),await r.put(t,o,{headers:{Authorization:`Token ${a}`}}).then((async function(e){console.log(e),200!==e.status&&201!==e.status||await d().success({title:"NEXT OF KIN UPDATE",balloon:!0,position:"topRight",animateInside:!0,message:"You have successfully updated your next of kin information. Please wait for them to confirm this to complete your account registration."}),p().ajax("GET","/users/get-kin/",{target:"#kin",swap:"outerHTML"}),v()})).catch((async function(e){console.log(e),e.response.data.nin?(await d().error({title:"NEXT OF KIN UPDATE ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.nin}),await A(3500)):e.response.data.phone?(await d().error({title:"NEXT OF KIN UPDATE ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.phone}),await A(3500)):e.response.data.first_name?(await d().error({title:"NEXT OF KIN UPDATE ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.first_name}),await A(3500)):e.response.data.last_name?(await d().error({title:"NEXT OF KIN UPDATE ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.last_name}),await A(3500)):e.response.data.email?(await d().error({title:"NEXT OF KIN UPDATE ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.email}),await A(3500)):e.response.data.date_of_birth?(await d().error({title:"NEXT OF KIN UPDATE ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.date_of_birth}),await A(3500)):e.response.data.bvn?(await d().error({title:"NEXT OF KIN UPDATE ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.bvn}),await A(3500)):e.response.data.message?(await d().error({title:"NEXT OF KIN UPDATE ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.message}),await A(3500)):e.response.data.non_field_errors?(await d().error({title:"NEXT OF KIN UPDATE ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.non_field_errors}),await A(3500)):(await d().error({title:"NEXT OF KIN UPDATE ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.message}),await A(3500))})),this.editKin=!1,this.loading=!1},async closePopup(){const e=new URLSearchParams(window.location.search),t=e.get("p"),a=e.get("t"),o=e.get("reference");var i=`/api/cards/${t}/verify/?trxref=${o}&reference=${o}`;console.log(`${t} - ${a} - ${o} - ${i}`),await async function(e,t){await r.get(e,{headers:{Authorization:`Token ${t}`}}).then((function(e){console.log(e),d().success({title:"PAYMENT VERIFICATION",balloon:!0,position:"topRight",animateInside:!0,message:"You have successfully verified your card"})})).catch((function(e){console.log(e),d().error({title:"PAYMENT VERIFICATION ERROR",balloon:!0,position:"topRight",animateInside:!0,message:"The verification process failed"})}))}(i,a),window.close()},deleteCard(e,t){r.delete(`/api/cards/${e}/`,{headers:{Authorization:`Token ${t}`}}).then((e=>{console.log(e),d().success({title:"DEBIT CARD",balloon:!0,position:"topRight",animateInside:!0,message:"Card has been successfully deleted"}),p().ajax("GET","/users/get-cards/",{target:"#cards",swap:"outerHTML"})})).catch((e=>{d().error({title:"DEBIT CARD",balloon:!0,position:"topRight",animateInside:!0,message:e.message})}))},activateCard(e,t){r.get(`/api/cards/${e}/activate-card/`,{headers:{Authorization:`Token ${t}`}}).then((e=>{d().success({title:"DEBIT CARD",balloon:!0,position:"topRight",animateInside:!0,message:"Successfully activated your account"}),console.log(e.data.message),p().ajax("GET","/users/get-cards/",{target:"#cards",swap:"outerHTML"})})).catch((e=>{console.log(e.message),d().error({title:"DEBIT CARD",balloon:!0,position:"topRight",animateInside:!0,message:e.message})}))},async cardSubmitForm(){this.loading=!0;const e=this.$refs.cardForm,t=e.action,a=e.dataset.token;let o=new FormData(e);await e.querySelectorAll("[name]").forEach((e=>{o.append(e.name,e.value)})),console.dir(o),await r.post(t,o,{headers:{Authorization:`Token ${a}`}}).then((async function(e){console.log(e),200!==e.status&&201!==e.status||await d().success({title:"DEBIT CARD",balloon:!0,position:"topRight",animateInside:!0,message:"You have successfully added a new card"}),await r.get(`${t}${e.data.id}/pay/`,{headers:{Authorization:`Token ${a}`}}).then((async t=>{console.log(t.data);const o=t.data.authorization_url,i=window.open(o,"Paystack Payment","width=600,height=600");if(i){i.focus();const t=window.setInterval((()=>{r.get(`/api/cards/${e.data.id}/`,{headers:{Authorization:`Token ${a}`}}).then((e=>{e.data.card_verified&&(clearInterval(t),p().ajax("GET","/users/get-cards/",{target:"#cards",swap:"outerHTML"}))})).catch((e=>{console.log(e)}))}),1e3)}else alert("Please disable your popup blocker for 'https://dropsride.com/' to proceed with payment.")})).catch((e=>{console.log(e)}))})).catch((async function(e){if(console.log(e),e.response.data.card_no)return await d().error({title:"DEBIT CARD ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.card_no}),void await A(3500);if(e.response.data.card_exp_year)return await d().error({title:"DEBIT CARD ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.card_exp_year}),void await A(3500);if(e.response.data.name_on_card)return await d().error({title:"DEBIT CARD ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.name_on_card}),void await A(3500);if(e.response.data.message)await d().error({title:"DEBIT CARD ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.message});else{if(e.response.data.non_field_errors)return await d().error({title:"DEBIT CARD ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.non_field_errors}),void await A(3500);await d().error({title:"DEBIT CARD ERROR",balloon:!0,position:"topRight",animateInside:!0,message:e.message})}})),this.editCard=!1,this.loading=!1},formText(){return this.loading?"Processing...":"Login"},updateUserText(){return this.loading?"Processing...":"Update Details"},updateKinText(){return this.loading?"Processing...":"Update Kin Details"},settingsText(){return this.loading?"Processing...":"Submit"},addCardText(){return this.loading?"Processing...":"Add Card"}}})),j.Z.data("Cartype",(function(){return{default:y,creating:!1,loading:!1,carSlider(){this.swiper=new m.ZP(this.$refs.container,{direction:"horizontal",loop:!0,sidesPerView:1})},async addCarType(){this.creating=!0;const e=this.$refs.carForm,t=e.action,a=e.dataset.token;let o=new FormData(e);e.querySelectorAll("[name]").forEach((e=>{if("textarea"===e.type){let t=e.id;console.log("textarea content: ",window.parent.tinymce.get(t).getContent()),o.append(e.name,window.parent.tinymce.get(t).getContent())}"textarea"!==e.type&&o.append(e.name,e.value)})),console.log(o),await(3e3,new window.Promise((e=>setTimeout(e,3e3)))),await r.post(t,o,{headers:{Authorization:`Token ${a}`}}).then((async e=>{console.dir(e),await d().success({title:"CREATED NEW CAR TYPE",message:"You have successfully new car type"}),this.creating=!1,this.openCreateCar=!1,await p().ajax("GET",`${location.origin}/settings/cars/table/`,{target:"#table",swap:"outerHTML"}),await p().ajax("GET",`${location.origin}/settings/cars/`,{target:"#slider",swap:"innerHTML"})})).catch((async e=>{await d().error({title:"CREATING CAR TYPE FAILED",message:e.message}),this.creating=!1}))}}})),j.Z.data("Career",(function(){return{creating:!1,applying:!1,careerDetails:!1,updating:!1,readDetail:!1,applyText(){return this.applying?"Submitting...":"Apply Now"},openApplicant(e){let t=`/careers/applicant/${e}/`;p().ajax("GET",t,{target:"#uDetail",swap:"innerHTML"}),this.careerDetails=!0},openCareerDetailNow(e){let t=`/careers/pages/${e}/`;p().ajax("GET",t,{target:"#pagesDetail",swap:"innerHTML"}),this.readDetail=!this.readDetail},async addDepForm(){const e=this.$refs.depForm,t=e.action,a=e.dataset.token;let o=new FormData(e);e.querySelectorAll("[name]").forEach((e=>{o.append(e.name,e.value)})),console.log(o),await S(3e3),await r.post(t,o,{headers:{Authorization:`Token ${a}`}}).then((async e=>{console.log(e),await d().success({title:"ADDED DEPARTMENT",message:"You have successfully added a new department"}),this.updating=!1,p().ajax("GET","/careers/departments/",{target:"#dep",swap:"innerHTML"}),this.addDep=!1})).catch((async e=>{await d().error({title:"ADDING DEPARTMENT FAILED",message:e.message}),this.updating=!1}))},openCareerDetail(e){this.careerDetails=!0;let t=`/careers/${e}/`;p().ajax("GET",t,{target:"#uDetail",swap:"innerHTML"})},openCareerUpdate(e){this.careerDetails=!0;let t=`/careers/${e}/update`;p().ajax("GET",t,{target:"#uDetail",swap:"innerHTML"})},async openCreateCareerForm(e){console.log(e),await p().ajax("GET","/careers/create/",{target:"#userModal",swap:"innerHTML"}),this.openCreateCareer=!0},async createCareer(){this.creating=!0;const e=this.$refs.careerForm,t=e.action,a=e.dataset.token;let o=new FormData(e);e.querySelectorAll("[name]").forEach((e=>{if("textarea"===e.type){let t=e.id;console.log("textarea content: ",window.parent.tinymce.get(t).getContent()),o.append(e.name,window.parent.tinymce.get(t).getContent())}"textarea"!==e.type&&o.append(e.name,e.value)})),console.log(o),await S(3e3),await r.post(t,o,{headers:{Authorization:`Token ${a}`}}).then((async e=>{await d().success({title:"CREATTED CAREER",message:"You have successfully created a career listing"}),p().ajax("GET",`${location.origin}/careers/`,{target:"#careerList",swap:"innerHTML"}),this.careerDetails=!0,p().ajax("GET",`${location.origin}/careers/${e.data.slug}/`,{target:"#uDetail",swap:"innerHTML"}),this.creating=!1,this.openCreateCareer=!1})).catch((async e=>{e.response.data.summary?await d().error({title:"CAREER CREATE",balloon:!0,position:"topRight",animateInside:!0,message:`SUMARRY: ${e.response.data.summary}`}):e.response.data.non_field_errors?await d().error({title:"CAREER CREATE",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.non_field_errors}):e.message&&await d().error({title:"CAREER CREATE",balloon:!0,position:"topRight",animateInside:!0,message:e.message}),this.creating=!1}))},async applyCareer(){this.applying=!0;const e=this.$refs.careerForm,t=e.action,a=e.dataset.slug,o=e.dataset.csrf;let i=new FormData(e);e.querySelectorAll("[name]").forEach((e=>{if("textarea"===e.type){let t=e.id;console.log("textarea content: ",window.parent.tinymce.get(t).getContent()),i.append(e.name,window.parent.tinymce.get(t).getContent())}"textarea"!==e.type&&"position"!==e.name&&i.append(e.name,e.value)})),console.log(i),await r.post(t,i,{headers:{"X-CSRFToken":o}}).then((async e=>{console.log(e),await d().success({title:"SUCCESSFULLY APPLIED",message:"You have successfully applied to a job listing"}),this.applying=!1,await S(3e3),this.openCareerDetailNow(a)})).catch((async e=>{await d().error({title:"APPLICATION FAILED",message:e.message}),this.applying=!1}))},async updateCareer(){this.updating=!0;const e=this.$refs.careerForm,t=e.action,a=e.dataset.slug,o=e.dataset.token;let i=new FormData(e);e.querySelectorAll("[name]").forEach((e=>{if("textarea"===e.type){let t=e.id;console.log("textarea content: ",window.parent.tinymce.get(t).getContent()),i.append(e.name,window.parent.tinymce.get(t).getContent())}"textarea"!==e.type&&i.append(e.name,e.value)})),console.log(i),await S(3e3),await r.put(t,i,{headers:{Authorization:`Token ${o}`}}).then((async e=>{console.log(e),await d().success({title:"UPDATED CAREER",message:"You have successfully updated a career listing"}),await p().ajax("GET",`${location.origin}/careers/`,{target:"#careerList",swap:"innerHTML"}),await p().ajax("GET",`${location.origin}/careers/${a}/`,{target:"#uDetail",swap:"innerHTML"}),this.updating=!1,this.careerDetails=!0})).catch((async e=>{await d().error({title:"UPDATING CAREER FAILED",message:e.message}),this.updating=!1}))}}})),j.Z.data("Transactions",(function(){return{tDetails:!1,openTransaction(e){let t=`/users/transactions/${e}/detail/`;p().ajax("GET",t,{target:"#tDetail",swap:"innerHTML"}),this.tDetails=!0}}})),j.Z.data("Localization",(function(){return{loading:!1,openLocalizationDetail(e){let t=`/settings/localization/${e}/`;p().ajax("GET",t,{target:"#uDetail",swap:"innerHTML"}),this.proDetails=!0},async addLocale(){this.loading=!0;const e=this.$refs.localeForm,t=e.action,a=e.dataset.token;let o=new FormData(e);e.querySelectorAll("[name]").forEach((e=>{if("textarea"===e.type){let t=e.id;console.log("textarea content: ",window.parent.tinymce.get(t).getContent()),o.append(e.name,window.parent.tinymce.get(t).getContent())}"textarea"!==e.type&&o.append(e.name,e.value)})),console.log(o),await u(3e3),await r.post(t,o,{headers:{Authorization:`Token ${a}`}}).then((async e=>{await d().success({title:"CREATED NEW LOCALE",message:"You have successfully new operational location"}),this.proDetails=!0,this.loading=!1,this.openCreateLocal=!1,await p().ajax("GET",`${location.origin}/settings/localization/`,{target:"#userList",swap:"innerHTML"}),await p().ajax("GET",`${location.origin}/settings/localization/${e.data.uuid}/`,{target:"#uDetail",swap:"innerHTML"})})).catch((async e=>{e.response.data.state?await d().error({title:"CREATING LOCALE FAILED",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.state}):await d().error({title:"CREATING LOCALE FAILED",message:e.message}),this.loading=!1}))},async updateLocale(){this.updating=!0;const e=this.$refs.localeForm,t=e.action,a=e.dataset.token;let o=new FormData(e);e.querySelectorAll("[name]").forEach((e=>{if("textarea"===e.type){let t=e.id;console.log("textarea content: ",window.parent.tinymce.get(t).getContent()),o.append(e.name,window.parent.tinymce.get(t).getContent())}"textarea"!==e.type&&o.append(e.name,e.value)})),console.log(o),await u(3e3),await r.put(t,o,{headers:{Authorization:`Token ${a}`}}).then((async e=>{await d().success({title:"UPDATED LOCALIZATION",message:"You have successfully updated a locale"}),await p().ajax("GET",`${location.origin}/settings/localization/`,{target:"#userList",swap:"innerHTML"}),await p().ajax("GET",`${location.origin}/settings/localization/${e.data.uuid}/`,{target:"#uDetail",swap:"innerHTML"}),this.updating=!1,this.proDetails=!0})).catch((async e=>{await d().error({title:"UPDATING LOCALIZATION FAILED",message:e.message}),this.updating=!1}))},openLocaleUpdate(e){this.proDetails=!0;let t=`${location.origin}/settings/localization/${e}/update/`;p().ajax("GET",t,{target:"#uDetail",swap:"innerHTML"})}}})),j.Z.data("Blog",(function(){return{creating:!1,updating:!1,blogDetails:!1,readDetail:!1,post_img:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",openBlogDetailNow(e){let t=`/news/pages/${e}/`;p().ajax("GET",t,{target:"#pagesDetail",swap:"innerHTML"}),this.readDetail=!this.readDetail},openPostDetail(e){this.blogDetails=!0;let t=`/news/admin/${e}/`;p().ajax("GET",t,{target:"#uDetail",swap:"innerHTML"})},openPostUpdate(e){this.blogDetails=!0;let t=`/news/admin/${e}/update/`;p().ajax("GET",t,{target:"#update",swap:"outerHTML"})},async updateBlog(){this.updating=!0;const e=this.$refs.blogForm,t=e.action,a=e.dataset.slug,o=e.dataset.token;let i=new FormData(e);e.querySelectorAll("[name]").forEach((e=>{if("tags"===e.name){let t=e.value.split(",");i.append(e.name,t),console.log(t)}else if("textarea"===e.type){let t=e.id;console.log("textarea content: ",window.parent.tinymce.get(t).getContent()),i.append(e.name,window.parent.tinymce.get(t).getContent())}else i.append(e.name,e.value)})),console.log(i),await q(3e3),await r.put(t,i,{headers:{Authorization:`Token ${o}`}}).then((async e=>{console.log(e),await d().success({title:"UPDATED POST",message:"You have successfully updated a post content"}),await p().ajax("GET",`${location.origin}/news/admin/`,{target:"#blogList",swap:"innerHTML"}),await p().ajax("GET",`${location.origin}/news/admin/${a}/`,{target:"#uDetail",swap:"innerHTML"}),this.updating=!1,this.blogDetails=!0})).catch((async e=>{await d().error({title:"UPDATED FAILED",message:e.message}),this.updating=!1}))},async createPost(){this.updating=!0;const e=this.$refs.postForm,t=e.action,a=e.dataset.token;let o=new FormData(e);e.querySelectorAll("[name]").forEach((e=>{if("tags"===e.name)o.append(e.name,e.value),console.log(e.values);else if("textarea"===e.type){let t=e.id;console.log("textarea content: ",window.parent.tinymce.get(t).getContent()),o.append(e.name,window.parent.tinymce.get(t).getContent())}else o.append(e.name,e.value)})),console.log(o),await q(3e3),await r.post(t,o,{headers:{Authorization:`Token ${a}`}}).then((async e=>{console.log(e),await d().success({title:"CREATED POST",message:"You have successfully updated a post content"}),p().ajax("GET",`${location.origin}/news/admin/`,{target:"#blogList",swap:"innerHTML"}),p().ajax("GET",`${location.origin}/news/admin/${e.data.slug}/`,{target:"#uDetail",swap:"innerHTML"}),this.updating=!1,this.blogDetails=!0})).catch((async e=>{await d().error({title:"CREATING POST FAILED",message:e.message}),this.updating=!1}))}}})),j.Z.start();const ae=(0,z.qY)();let{APPLICATION_SERVER_KEY:oe,CREATE_WP_DEVICE:ie,SEND_NOTIFICATION:ne}=window.WEB_PUSH_CFG;function se(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),a=window.atob(t),o=new Uint8Array(a.length),i=0;i<a.length;++i)o[i]=a.charCodeAt(i);return o}if(document.getElementById("shareUrl")){const e=document.getElementById("shareUrl"),t=e.dataset.url,a=document.title;e.addEventListener("click",(async()=>{navigator.share&&await navigator.share({title:a,text:`Check out ${a.toUpperCase()}.`,url:t}).then((async()=>await d().success({title:"[SHARE PAGE]",balloon:!0,position:"topRight",animateInside:!0,message:`Successfully shared ${t}`}))).catch((async e=>await d().error({title:"[SHARE PAGE ERROR]",balloon:!0,position:"topRight",animateInside:!0,message:e})))}))}async function re(e){await(1500,new window.Promise((e=>setTimeout(e,1500))));const t=e.toJSON(),a=t.endpoint.split("/"),o=a[a.length-1],i={status_type:"subscribe",subscription:t,browser:ae.name.toLowerCase(),p256dh:t.keys.p256dh,auth:t.keys.auth,user_agent:navigator.getUserAgent,registration_id:o,group:"users"},n=JSON.stringify(i);await r.post(ie,n,{headers:{"Content-Type":"application/json","X-CSRFToken":document.head.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then((function(e){})).catch((function(e){}))}function le(){document.getElementById("subscribeNotificationButton")&&document.getElementById("subscribeNotificationButton").classList.toggle("hidden",!0)}"serviceWorker"in navigator&&window.addEventListener("load",(async()=>{await navigator.serviceWorker.register("/sw.js",{scope:"/"}).then((async e=>{await navigator.serviceWorker.ready.then((function(e){de(e)}))})).catch((e=>{d().error({title:"[SERVICE WORKER]",balloon:!0,position:"topRight",animateInside:!0,message:"Service Worker Failed to Register"})}))}));const de=async e=>{e.showNotification?"denied"!==Notification.permission?("denied"!==Notification.permission&&le(),"PushManager"in window?("PushManager"in window&&le(),await e.pushManager.getSubscription().then((t=>{console.log("Registration Object",e),t&&null!==t?(null!==t||t)&&(console.log("Subscribe Already Done"),le()):function(e){if(document.getElementById("subscribeNotificationButton")){const t=document.getElementById("subscribeNotificationButton");t.classList.toggle("hidden",!1),t.addEventListener("click",(()=>{(async function(e){await e.pushManager.getSubscription().then((function(e){if(e)return console.log("subscription exists"),re(e),void async function(e){const t=e.toJSON(),a=t.endpoint.split("/"),o={registration_id:a[a.length-1],auth:t.keys.auth,head:"Welcome to Dropsride",body:"This is how our push notifications shall be appearing on your device."},i=JSON.stringify(o);await r.post(ne,i,{headers:{"Content-Type":"application/json"}}).then((async function(e){await d().info({title:"[PUSH NOTIFICATION TEST SUCCESSFUL]",balloon:!0,position:"topRight",animateInside:!0,message:e.data.message})})).catch((async function(e){await d().error({title:"[PUSH NOTIFICATION TEST ERROR]",balloon:!0,position:"topRight",animateInside:!0,message:e.response.data.detail})}))}(e)}));const t={userVisibleOnly:!0,applicationServerKey:se(oe)};await e.pushManager.subscribe(t).then((function(e){re(e)})).catch((e=>{}))})(e),console.log("Subscribe Button Set")}))}}(e)}))):d().info({title:"[PUSH BROWSER UNAVAILBALE]",balloon:!0,position:"topRight",animateInside:!0,message:"Push notification is not allowed in your browser."})):d().warning({title:"[PUSH DENIED]",balloon:!0,position:"topRight",animateInside:!0,message:"You prevented us from shwoing notifications. Manually check if you have prevented push notifcation from us."}):d().error({title:"[PUSH UNSUPPORTED]",balloon:!0,position:"topRight",animateInside:!0,message:"Showing <strong>PUSH NOTIFICATIONS</strong> is unsupported"})};if(document.getElementById("installButton")){const e=document.getElementById("installButton");window.addEventListener("beforeinstallprompt",(t=>{window.deferredPrompt=t,e.classList.toggle("hidden",!1)})),e.addEventListener("click",(()=>{const t=window.deferredPrompt;t&&(t.prompt(),t.userChoice.then((t=>{window.deferredPrompt=null,e.classList.toggle("hidden",!0)})))}))}window.addEventListener("appinstalled",(e=>{d().info({title:"[SERVICE WORKER]",balloon:!0,position:"topRight",animateInside:!0,message:"You have successfully installed dropsride PWA."})})),["htmx:onLoad","htmx:load","load","htmx:afterSwap","htmx:afterOnLoad","htmx:afterRequest"].forEach((e=>{window.addEventListener(e,(function(){const e=document.querySelectorAll(".counter"),t=document.getElementById("car"),a=new(X().Controller);document.getElementById("const")&&Q().loadAnimation({container:document.getElementById("const"),path:"/static/vendors/images/lottie/under-construction.json",renderer:"svg",loop:!0,autoPlay:!0,name:"Under Construction"}),document.getElementById("countTrigger")&&new(X().Scene)({triggerElement:"#countTrigger",triggerHook:"onEnter",duration:"100%",reverse:!1,offset:50}).on("enter",(function(){e&&e.forEach((e=>{(0,Y.Z)({targets:e,innerHTML:[0,e.getAttribute("data-count")],easing:"easeInOutSine",round:1,duration:4e3})}))})).addTo(a),document.getElementById("track")&&new(X().Scene)({triggerElement:"#track",triggerHook:"onEnter",duration:"100%",reverse:!0,offset:50}).on("enter",(function(){t&&(0,Y.Z)({targets:"#car",translateX:{value:"-100vw",duration:5e3},easing:"easeInOutSine",opacity:1,delay:Y.Z.stagger(200,{start:500}),direction:"normal",loop:!1})})).addTo(a),document.getElementById("hows")&&new(X().Scene)({triggerElement:"#hows",triggerHook:"onEnter",duration:"100%",reverse:!1,offset:100}).on("enter",(function(){document.querySelectorAll(".how")&&(0,Y.Z)({targets:".how",translateX:56,easing:"easeInOutSine",duration:800,opacity:1,delay:Y.Z.stagger(200,{start:500})})})).addTo(a),document.querySelectorAll(".intro")&&(0,Y.Z)({targets:".intro",translateX:-56,easing:"easeInOutSine",duration:800,opacity:1,delay:Y.Z.stagger(200,{start:500})})}))}))},6601:()=>{}},e=>{e.O(0,[186],(()=>(9793,e(e.s=9793)))),e.O()}]);
//# sourceMappingURL=project.7a2567c7.js.map