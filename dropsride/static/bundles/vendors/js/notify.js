var notify_badge_class,notify_menu_class,notify_api_url,notify_fetch_count,notify_unread_url,notify_mark_all_unread_url,notify_refresh_period=15e3,consecutive_misfires=0,registered_functions=[];function fill_notification_badge(e){var t=document.getElementsByClassName(notify_badge_class);if(t)for(var i=0;i<t.length;i++)t[i].innerHTML=e.unread_count}function my_special_notification_callback(e){let t=document.getElementsByClassName("live_notify_list"),i="",n="",a="";if(t)for(var s=e.unread_list.map((function(e){return void 0!==e.verb&&(n='<h6 class="text-warning p-2 bg-warning/40 rounded-full object-fit flex-none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M15.75 1.5a6.75 6.75 0 00-6.651 7.906c.067.39-.032.717-.221.906l-6.5 6.499a3 3 0 00-.878 2.121v2.818c0 .414.336.75.75.75H6a.75.75 0 00.75-.75v-1.5h1.5A.75.75 0 009 19.5V18h1.5a.75.75 0 00.53-.22l2.658-2.658c.19-.189.517-.288.906-.22A6.75 6.75 0 1015.75 1.5zm0 3a.75.75 0 000 1.5A2.25 2.25 0 0118 8.25a.75.75 0 001.5 0 3.75 3.75 0 00-3.75-3.75z" clip-rule="evenodd" /></svg></h6>',a=`<h6 class="text-gray-700 font-bold text-sm">${e.verb}</h6>`),void 0!==e.description&&(i+='<p class="font-semibold text-gray-600 text-s line-clamp-5 leading-3 block break-words">'+e.description+"</h6>"),void 0!==e.timestamp&&(i+='<p class="time">'+new Date(e.timestamp).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"})),`\n        <li @click="markRead(${e.id})" class=" unread">\n            <div class="space-x-1 flex items-center">${n} ${a}</div>\n            <div class="space-y-1 line-clamp-1 break-words w-full flex-none">\n                ${i}\n            </div>\n        </li>\n        `})).join(""),o=0;o<t.length;o++)t[o].innerHTML=s}function fill_notification_list(e){var t=document.getElementsByClassName(notify_menu_class);if(t)for(var i=e.unread_list.map((function(e){var t="";return void 0!==e.actor&&(t=e.actor),void 0!==e.verb&&(t=t+" "+e.verb),void 0!==e.target&&(t=t+" "+e.target),void 0!==e.timestamp&&(t=t+" "+e.timestamp),"<li>"+t+"</li>"})).join(""),n=0;n<t.length;n++)t[n].innerHTML=i}function register_notifier(e){registered_functions.push(e)}function fetch_api_data(){if(registered_functions.length>0){var e=new XMLHttpRequest;e.addEventListener("readystatechange",(function(t){if(console.log(t),4===this.readyState)if(200===this.status){consecutive_misfires=0;for(var i=JSON.parse(e.responseText),n=0;n<registered_functions.length;n++)registered_functions[n](i)}else consecutive_misfires++})),e.open("GET",notify_api_url+"?max="+notify_fetch_count,!0),e.send()}if(consecutive_misfires<10)setTimeout(fetch_api_data,notify_refresh_period);else{var t=document.getElementsByClassName(notify_badge_class);if(t)for(var i=0;i<t.length;i++)t[i].innerHTML="!",t[i].title="Connection lost!"}}setTimeout(fetch_api_data,1e3);